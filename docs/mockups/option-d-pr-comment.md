## What-If Summary (non-blocking)

| Risk Assessment | Risk Level | Key Concerns |
|---|---|---|
| Infrastructure Drift | High | All changes appear to be infrastructure drift with no corresponding code modifications, including critical storage policy changes. |
| PR Intent Alignment | High | Infrastructure changes are completely unrelated to the stated PR intent of adding custom risk assessment agents. |
| Cost Impact | Low | None |
| Naming Convention | Medium | Storage account name violates CAF naming conventions with missing environment and improper structure. |

**Summary:** 10 resources showing modifications, primarily to diagnostic settings, private endpoint configurations, and DNS zone links. Most changes appear to be Azure platform-managed updates or What-If noise rather than intentional configuration changes.

<details><summary>üìÅ View changed resources (3 High Confidence)</summary>

| Resource | Type | Action | Summary |
|---|---|---|---|
| storageaccount1 | Microsoft.Storage/storageAccounts | Modify | Retention policy removal and lifecycle changes |
| pe-kv-prod-001 | Microsoft.Network/privateEndpoints | Modify | Private DNS zone group configuration update |
| diag-app-prod | Microsoft.Insights/diagnosticSettings | Modify | Log category and retention changes |

</details>

<details><summary>‚ö†Ô∏è Potential Azure What-If Noise (7 Low Confidence)</summary>

| Resource | Type | Action | Summary |
|---|---|---|---|
| vnet-prod-westus-001 | Microsoft.Network/virtualNetworks | Modify | etag and provisioningState changes only |
| ... | ... | ... | ... |

</details>

<details><summary>üí∞ Cost Impact Details</summary>

Minor configuration changes with negligible cost impact. No new billable resources, SKU upgrades, or scaling changes detected.

</details>

<details><summary>üìõ Naming Convention Details</summary>

| Resource | Issue | Expected |
|---|---|---|
| storageaccount1 | No CAF prefix, missing environment and workload components | `st<workload><env>` (e.g. `stnavigatorprod001`) |
| pe-kv-prod-001 | Uses `pe-` prefix instead of CAF `pep-` | `pep-kv-prod-001` |
| diag-app-prod | No standard CAF prefix for diagnostic settings | `diag-<workload>-<env>` is acceptable but not in CAF |

</details>

<details><summary>üìÇ Raw What-If Output</summary>

```
(raw what-if text)
```

</details>

### Verdict: ‚ùå UNSAFE

**Reasoning:** This deployment shows significant infrastructure drift with all changes appearing outside the code diff, including a potentially risky storage retention policy removal. The changes are also completely unrelated to the stated PR intent of adding custom risk assessment agents.

---

*Generated by [bicep-whatif-advisor](https://github.com/neilpeterson/bicep-whatif-advisor)*
